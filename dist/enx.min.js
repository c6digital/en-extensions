(()=>{var E=Object.defineProperty;var x=(a,e)=>{for(var t in e)E(a,t,{get:e[t],enumerable:!0})};var m={};x(m,{getENFieldValue:()=>f,getENSupporterData:()=>r,setENFieldValue:()=>d});function f(a,e=!0){let t=window.EngagingNetworks.require._defined.enDefaults.getFieldValue(a);if(t)return t;if(e)return r(a)}function r(a){return window.EngagingNetworks.require._defined.enDefaults.getSupporterData(a)}function d(a,e){window.EngagingNetworks.require._defined.enDefaults.setFieldValue(a,e)}var l=class{constructor(){this.bindTargets=[...document.querySelectorAll("[class*='enx-model:']")],this.shouldRun()&&this.run()}shouldRun(){return this.bindTargets.length>0}run(){let e=this.bindTargets.map(s=>s.classList.value.split("enx-model:")[1].split(" ")[0]);[...new Set(e)].forEach(s=>{[...document.querySelectorAll(`[name="${s}"]`)].forEach(i=>{i.addEventListener("change",()=>{let u=CSS.escape(`enx-model:${s}`),g=[...document.querySelectorAll(`.${u}`)],S=f(s.split(".")[1]);g.forEach(w=>{w.textContent=S})})})})}};var c=class{constructor(e=[]){this.proxies=e,this.shouldRun()&&this.activateProxyFields()}shouldRun(){return this.proxies.length>0}activateProxyFields(){this.proxies.forEach(e=>{let t=e.source.split(".")[1],s=e.target.split(".")[1];document.querySelectorAll(`[name="${e.source}"]`).forEach(o=>{o.addEventListener("change",()=>{d(s,r(t))})}),d(s,r(t))})}};var h=class{constructor(){document.querySelectorAll(".enx-cloak").forEach(e=>{e.classList.remove("enx-cloak")})}};var p=class{constructor(){this.currentStep=0,this.spaTabs=[],this.init()}init(){this.resetTabs(),this.onUrlHit(),this.onBackButton(),this.onClick()}resetTabs(){this.currentStep=0;let e=[...document.querySelectorAll(".spa[class*='spa-name--']")].map(t=>t.className.match(/spa-name--[a-z]*/gi)[0].replace("spa-name--",""));this.spaTabs=[...new Set(e)]}onUrlHit(){if(window.location.hash){let e=new URLSearchParams(location.href);if(document.querySelectorAll(".spa-force-start").length&&!e.has("override-force-spa"))this.changeSpa(".spa-force-start"),history.pushState(null,"","#"),this.log("URL","Show Landing page");else{let t=location.hash.replace("#","");document.querySelectorAll(".spa-name--"+t).length?(this.changeSpa(".spa-name--"+t),this.log("URL",'Show "'+location.hash+'"'),this.setStep(t)):[...document.querySelectorAll(".spa:not(.spa-hidden)")].some(o=>o.className.match(/show:/))?window.location=window.location.href.split("#")[0]:this.changeSpa(document.querySelector(".spa:not(.spa-hidden)"))}}else this.changeSpa(document.querySelector(".spa:not(.spa-hidden)"))}onBackButton(){window.onpopstate=e=>{e.state?(this.changeSpa(".spa-name--"+e.state.page),this.log("Browser",'Show "'+e.state.page+'"'),this.setStep(e.state.page)):[...document.querySelectorAll(".spa:not(.spa-hidden)")].some(s=>s.className.match(/show:/))?location.reload():(this.changeSpa(".spa:not(.spa-hidden)"),this.log("Browser","Show Landing page"),this.setStep(this.spaTabs[0]))}}onClick(){document.querySelectorAll("[spa-destination]").forEach(t=>{t.addEventListener("click",s=>{let o=s.target.getAttribute("spa-destination"),i=this.spaTabs.indexOf(o),u=!s.target.hasAttribute("no-validate")&&this.currentStep<i;if(!(this.currentStep===i||u&&i>this.currentStep+1)){if(u&&!this.validateVisibleFields()){window.dispatchEvent(new CustomEvent("onSpaError",{detail:this.spaTabs[this.currentStep].className}));return}this.changeSpa(".spa-name--"+o),this.log("App",'Show "'+o+'"'),window.dispatchEvent(new CustomEvent("spa:page-view",{detail:[{destination:o,current:this.spaTabs[this.currentStep]}]})),this.setStep(o),o&&this.pushState(o)}})})}changeSpa(e){this.hideAndShow(this.spaTabs[this.currentStep],e)}hideAndShow(e,t){let s=document.querySelector(`.spa-name--${e}`);s&&s.classList.remove("spa-active"),window.scrollTo({top:0,behavior:"smooth"});let o=t instanceof Element?t:document.querySelector(t);o&&o.classList.add("spa-active")}hideImportant(e){e.style.display="none!important"}setStep(e){this.currentStep=this.spaTabs.indexOf(e)}pushState(e){let t={page:e},s="#"+e;history.pushState(t,"",s)}log(e,t){console.log("%cSPA","color: #241C15; background-color: #FF3EBF; padding: 4px; font-weight: 400;"),console.log("Client:	",e),console.log("Action:	",t)}moveToFirstFailedSpa(){let e=document.querySelector(".en__field--validationFailed"),t=e&&e.closest(".spa");if(!t)return;let s=Array.from(t.classList).find(o=>o.includes("spa-name--"));s&&this.changeSpa("."+s)}validateVisibleFields(){return!0}};var n=class{constructor(e={}){let t={proxies:[],beforeInit:()=>{},beforeCloakRemoval:()=>{},afterInit:()=>{}};this.config={...t,...e},window.hasOwnProperty("ENXPageConfig")&&(this.config={...this.config,...window.ENXPageConfig}),window.ENXConfig=this.config,this.config.beforeInit(),this.waitForEnDefaults().then(()=>{this.model=new l,this.proxyFields=new c(this.config.proxies),this.multiStepForm=new p,this.helpers=m,this.config.beforeCloakRemoval(),this.cloak=new h,this.config.afterInit()})}waitForEnDefaults(){return new Promise(e=>{function t(){window.EngagingNetworks.require._defined.enDefaults!==void 0?e():setTimeout(t,50)}t()})}};window.ENX=n;var D=n;})();
