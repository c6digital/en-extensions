(()=>{var b=Object.defineProperty;var v=(o,e)=>{for(var t in e)b(o,t,{get:e[t],enumerable:!0})};var f={};v(f,{getENFieldValue:()=>m,getENSupporterData:()=>r,setENFieldValue:()=>d});function m(o,e=!0){let t=window.EngagingNetworks.require._defined.enDefaults.getFieldValue(o);if(t)return t;if(e)return r(o)}function r(o){return window.EngagingNetworks.require._defined.enDefaults.getSupporterData(o)}function d(o,e){window.EngagingNetworks.require._defined.enDefaults.setFieldValue(o,e)}var l=class{constructor(){this.bind()}bind(){let e=[...document.querySelectorAll("[class*='enx-model:']")].map(s=>s.classList.value.split("enx-model:")[1].split(" ")[0]);if(e.length===0)return;[...new Set(e)].forEach(s=>{[...document.querySelectorAll(`[name="${s}"]`)].forEach(i=>{i.addEventListener("change",h=>{let g=CSS.escape(`enx-model:${s}`),S=[...document.querySelectorAll(`.${g}`)],w=m(s.split(".")[1]);S.forEach(E=>{E.textContent=w})})})})}};var c=class{constructor(e=[]){this.config=e,this.activateProxyFields()}activateProxyFields(){this.config.forEach(e=>{let t=e.source.split(".")[1],s=e.target.split(".")[1];document.querySelectorAll(`[name="${e.source}"]`).forEach(a=>{a.addEventListener("change",()=>{d(s,r(t))})}),d(s,r(t))})}};var p=class{constructor(){document.querySelectorAll(".enx-cloak").forEach(e=>{e.classList.remove("enx-cloak")})}};var u=class{constructor(){this.currentStep=0,this.spaTabs=[],this.init()}init(){this.resetTabs(),this.onUrlHit(),this.onBackButton(),this.onClick()}resetTabs(){this.currentStep=0;let e=[...document.querySelectorAll(".spa[class*='spa-name--']")].map(t=>t.className.match(/spa-name--[a-z]*/gi)[0].replace("spa-name--",""));this.spaTabs=[...new Set(e)]}onUrlHit(){if(window.location.hash){let e=new URLSearchParams(location.href);if(document.querySelectorAll(".spa-force-start").length&&!e.has("override-force-spa"))this.changeSpa(".spa-force-start"),history.pushState(null,"","#"),this.log("URL","Show Landing page");else{let t=location.hash.replace("#","");document.querySelectorAll(".spa-name--"+t).length?(this.changeSpa(".spa-name--"+t),this.log("URL",'Show "'+location.hash+'"'),this.setStep(t)):[...document.querySelectorAll(".spa:not(.spa-hidden)")].some(a=>a.className.match(/show:/))?window.location=window.location.href.split("#")[0]:this.changeSpa(document.querySelector(".spa:not(.spa-hidden)"))}}else this.changeSpa(document.querySelector(".spa:not(.spa-hidden)"))}onBackButton(){window.onpopstate=e=>{e.state?(this.changeSpa(".spa-name--"+e.state.page),this.log("Browser",'Show "'+e.state.page+'"'),this.setStep(e.state.page)):[...document.querySelectorAll(".spa:not(.spa-hidden)")].some(s=>s.className.match(/show:/))?location.reload():(this.changeSpa(".spa:not(.spa-hidden)"),this.log("Browser","Show Landing page"),this.setStep(this.spaTabs[0]))}}onClick(){document.querySelectorAll("[spa-destination]").forEach(t=>{t.addEventListener("click",s=>{let a=s.target.getAttribute("spa-destination"),i=this.spaTabs.indexOf(a),h=!s.target.hasAttribute("no-validate")&&this.currentStep<i;if(!(this.currentStep===i||h&&i>this.currentStep+1)){if(h&&!this.validateVisibleFields()){window.dispatchEvent(new CustomEvent("onSpaError",{detail:this.spaTabs[this.currentStep].className}));return}this.changeSpa(".spa-name--"+a),this.log("App",'Show "'+a+'"'),window.dispatchEvent(new CustomEvent("spa:page-view",{detail:[{destination:a,current:this.spaTabs[this.currentStep]}]})),this.setStep(a),a&&this.pushState(a)}})})}changeSpa(e){this.hideAndShow(this.spaTabs[this.currentStep],e)}hideAndShow(e,t){let s=document.querySelector(`.spa-name--${e}`);s&&s.classList.remove("spa-active"),window.scrollTo({top:0,behavior:"smooth"});let a=t instanceof Element?t:document.querySelector(t);a&&a.classList.add("spa-active")}hideImportant(e){e.style.display="none!important"}setStep(e){this.currentStep=this.spaTabs.indexOf(e)}pushState(e){let t={page:e},s="#"+e;history.pushState(t,"",s)}log(e,t){console.log("%cSPA","color: #241C15; background-color: #FF3EBF; padding: 4px; font-weight: 400;"),console.log("Client:	",e),console.log("Action:	",t)}moveToFirstFailedSpa(){let e=document.querySelector(".en__field--validationFailed"),t=e&&e.closest(".spa");if(!t)return;let s=Array.from(t.classList).find(a=>a.includes("spa-name--"));s&&this.changeSpa("."+s)}validateVisibleFields(){return!0}};var n=class{constructor(e={}){let t={proxies:[],beforeInit:()=>{},beforeCloakRemoval:()=>{},afterInit:()=>{}};this.config={...t,...e},this.config.beforeInit(),this.waitForEnDefaults().then(()=>{this.model=new l,this.proxyFields=new c(this.config.proxies),this.multiStepForm=new u,this.helpers=f,this.config.beforeCloakRemoval(),this.cloak=new p,this.config.afterInit()})}waitForEnDefaults(){return new Promise(e=>{function t(){window.EngagingNetworks.require._defined.enDefaults!==void 0?e():setTimeout(t,50)}t()})}};window.ENX=n;var I=n;})();
