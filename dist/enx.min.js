(()=>{var Ce=Object.defineProperty;var Te=(n,e)=>{for(var t in e)Ce(n,t,{get:e[t],enumerable:!0})};var se={};Te(se,{addMaxLength:()=>Ie,disableSubmitButton:()=>Re,displayDonationAmt:()=>Le,enableSubmitButton:()=>Fe,getComponentAttribute:()=>E,getComponentAttributes:()=>C,getCurrency:()=>ee,getCurrencySymbol:()=>_e,getDataFromStorage:()=>Me,getENFieldValue:()=>A,getENSupporterData:()=>P,getENValidators:()=>de,getElementsOfComponent:()=>f,getElementsWithComponentAttribute:()=>M,getEnPageLocale:()=>q,getFirstElementWithComponentAttribute:()=>k,getMPData:()=>he,getMPPhotoUrl:()=>F,getNextPageUrl:()=>Q,getVisibleValidators:()=>me,giftAidCalculation:()=>Ne,log:()=>w,saveDataToStorage:()=>qe,saveDonationAmtToStorage:()=>ke,saveFieldValueToSessionStorage:()=>pe,setENFieldValue:()=>K,shuffleArray:()=>ie,transformEnxClassesToDataAttributes:()=>Be,updateCurrentYear:()=>De,updateNextPageUrl:()=>Pe,validateVisibleFields:()=>oe});function A(n,e=!0){let t=n.split(".")[1],r=window.EngagingNetworks.require._defined.enDefaults.getFieldValue(t);if(r||(r=P(t,!1),e&&r))return r;let o=document.querySelectorAll(`[name="${n}"]`);for(let i of o)if(i.type==="checkbox"||i.type==="radio"){if(i.checked)return i.value}else return i.value;return null}function P(n,e=!0){return e&&(n=n.split(".")[1]),window.EngagingNetworks.require._defined.enDefaults.getSupporterData(n)}function K(n,e,t=!0){t&&(n=n.split(".")[1]),window.EngagingNetworks.require._defined.enDefaults.setFieldValue(n,e)}function de(){return window.EngagingNetworks.require._defined.enValidation.validation.validators}function me(){return de().filter(n=>!!document.querySelector(".enx-multistep-active .en__field--"+n.field))}function oe(){return me().map(e=>(e.hideMessage(),!e.isVisible()||e.test())).every(e=>e)}function ie(n){for(var e=n.length,t,r;e;)r=Math.floor(Math.random()*e--),t=n[e],n[e]=n[r],n[r]=t;return n}function Q(){return document.querySelector("form.en__component--page")?.getAttribute("action")??""}async function he(n,e){try{return await(await fetch(`https://members-api.parliament.uk/api/Members/Search?skip=0&take=1&Name=${n}&Location=${e}`)).json()}catch{return!1}}async function F(n,e){let t=await he(n,e);return t.items[0]?t.items[0].value.thumbnailUrl:(console.log("No MP found for",n,e),"")}function q(){return window.pageJson.locale.substring(0,2)||"en"}function ee(){return A("transaction.paycurrency")||A("transaction.currency")||"USD"}function _e(){return 1 .toLocaleString(q(),{style:"currency",currency:ee()}).replace("1.00","")}function pe(n,e=null){e||(e=n),sessionStorage.setItem(e,A(n))}function ke(){pe("transaction.donationAmt","donationAmt")}function Le(){let n=document.querySelector(".display-donation-amt"),e=sessionStorage.getItem("donationAmt");n&&e&&(n.textContent=e)}function Ne(){let n=document.querySelector(".gift-aid-calculation"),e=sessionStorage.getItem("donationAmt");if(n&&e){let t=e/4*5;t%1!==0&&(t=t.toFixed(2)),n.querySelector(".donation-amt").textContent=e,n.querySelector(".gift-aid-amt").textContent=t.toString(),n.style.display="block"}}function w(n){window.ENXConfig.debug&&console.log(`%c[ENX]: ${n}`,"color: #241C15; background-color: #FF3EBF; padding: 4px; font-weight: 400;")}function Pe(){document.querySelector(".next-button")?.setAttribute("href",Q())}function qe(n=[]){n.forEach(e=>{let t=document.querySelector(e.storageValue);t&&t.value&&sessionStorage.setItem(e.storageKey,t.value)})}function Me(n=[]){n.forEach(function(e){let t=document.querySelector(e.target);t&&(t.innerText=sessionStorage.getItem(e.key))})}function De(){document.querySelectorAll(".current-year").forEach(n=>{n.innerText=new Date().getFullYear()})}function Ie(n){n.forEach(e=>{document.querySelector(e.key)?.setAttribute("maxlength",e.maxlength)})}function Re(n=!0){document.querySelectorAll(".en__submit button").forEach(t=>{t.disabled=!0,n&&(t.innerHTML=`<span class="submit-spinner spinner-border"></span> ${t.innerHTML}`)})}function Fe(){document.querySelectorAll(".en__submit button").forEach(e=>{e.disabled=!1,e.querySelector(".submit-spinner")?.remove()})}function Be(n="[class*='enx-']"){let e;typeof n instanceof NodeList?e=n:n instanceof HTMLElement?e=[n]:e=document.querySelectorAll(n),e.forEach(t=>{let r=t.className.split(" "),o=null;r.forEach(i=>{if(!i.includes("enx-"))return;o=o||[];let s=i.split(/[\[\]]/).filter(Boolean),p=s[0].split(":")[0],m={};for(let c=1;c<s.length;c++){let[g,h]=s[c].split("=");m[g]=h}let l=o.find(c=>c.componentName===p);l?l.attributes.push(m):o.push({componentName:p,attributes:Object.keys(m).length>0?[m]:[]})}),o&&o.forEach(i=>{let s=i.attributes.length>0?JSON.stringify(i.attributes):"";t.setAttribute(`data-${i.componentName}`,s),w(`Data attribute set "data-${i.componentName}" = ${s}`)})})}function f(n){return document.querySelectorAll(`[data-enx-${n}]`)}function C(n,e){let t=n.getAttribute(`data-enx-${e}`);if(!t)return null;try{return JSON.parse(t)}catch{return w(`Error parsing JSON "${t}" for "enx-${e}"`),null}}function E(n,e,t){let r=C(n,e);return r&&r[0][t]||null}function M(n,e,t=null){return[...f(n)].filter(o=>{let i=C(o,n);return t?i?i.some(s=>s[e]===t):!1:i?i.some(s=>s[e]):!1})}function k(n,e,t=null){return M(n,e,t)[0]}var B=class{constructor(){this.bindTargets=[...f("model")],this.shouldRun()&&this.run()}shouldRun(){return this.bindTargets&&this.bindTargets.length>0}run(){let e=this.bindTargets.map(r=>C(r,"model")[0].source);[...new Set(e)].forEach(r=>{[...document.querySelectorAll(`[name="${r}"]`)].forEach(i=>{i.addEventListener("input",()=>{this.updateTargetsWithSourceValue(r)}),this.updateTargetsWithSourceValue(r)})})}updateTargetsWithSourceValue(e){M("model","source",e).forEach(r=>{r.textContent=A(e)})}};var O=class{constructor(e=[]){this.proxies=[...e,...this.getProxyFieldsFromLabels()],this.shouldRun()&&this.activateProxyFields()}shouldRun(){return this.proxies.length>0}getProxyFieldsFromLabels(){let e=[];return document.querySelectorAll("label").forEach(r=>{let o=r.textContent;if(o.includes("enx-proxy[")){let i=/enx-proxy\[source=(.*)]/gi.exec(o),s=document.getElementById(r.getAttribute("for"))?.getAttribute("name");i&&s&&e.push({source:i[1],target:s})}}),e}activateProxyFields(){this.proxies.forEach(e=>{let t=e.source,r=e.target;document.querySelector(`[name="${r}"]`)?.closest(".en__field")?.classList.add("enx-hidden"),document.querySelectorAll(`[name="${t}"]`).forEach(s=>{s.addEventListener("change",()=>{K(r,A(t)),w(`Proxy field "${r}" updated with value "${A(t)}" from "${t}"`)})}),K(r,A(t)),w(`Proxy field "${r}" updated with value "${A(t)}" from "${t}"`)})}};var $=class{constructor(){let e=f("cloak");e&&e.forEach(t=>{t.classList.remove("enx-cloak")})}};var V=class{constructor(){this.currentStep=0,this.multistepTabs=[],this.shouldRun()&&this.init()}init(){this.resetTabs(),this.onUrlHit(),this.onBackButton(),this.onClick()}shouldRun(){return!!document.querySelector("[class*='enx-multistep:step']")}resetTabs(){this.currentStep=0,this.multistepTabs=[...f("multistep")].map(e=>E(e,"multistep","name")).filter(Boolean)}onUrlHit(){let e=new URLSearchParams(window.location.search),t=k("multistep","force-start","true");if(t&&!e.has("enx-multistep-override-force")){this.changeStep(t),history.pushState(null,"","#"),this.log("URL","Show Landing page");return}if(window.location.hash){let r=location.hash.replace("#",""),o=k("multistep","name",r);if(o){this.changeStep(o),this.log("URL",'Show "'+location.hash+'"'),this.setStep(r);return}}this.changeStep(document.querySelector("[class*='enx-multistep:step']"))}onBackButton(){window.onpopstate=e=>{e.state?(this.changeStep(k("multistep","name",e.state.page)),this.log("Browser",'Show "'+e.state.page+'"'),this.setStep(e.state.page)):(this.changeStep(k("multistep","name")),this.log("Browser","Show Landing page"),this.setStep(this.multistepTabs[0]))}}onClick(){M("multistep","destination").forEach(t=>{t.addEventListener("click",()=>{let r=E(t,"multistep","destination"),o=this.multistepTabs.indexOf(r),i=!E(t,"multistep","no-validate")&&this.currentStep<o;if(!(this.currentStep===o||i&&o>this.currentStep+1)){if(i&&!oe()){window.dispatchEvent(new CustomEvent("enx-multistep:error",{detail:this.multistepTabs[this.currentStep].className}));return}this.changeStep(k("multistep","name",r)),this.log("App",'Show "'+r+'"'),window.dispatchEvent(new CustomEvent("enx-multistep:page-view",{detail:[{destination:r,current:this.multistepTabs[this.currentStep]}]})),this.setStep(r),r&&this.pushState(r)}})})}changeStep(e){this.hideAndShow(this.multistepTabs[this.currentStep],e)}hideAndShow(e,t){let r=k("multistep","name",e);r&&r.classList.remove("enx-multistep:active"),window.scrollTo({top:0,behavior:"smooth"});let o=t instanceof Element?t:document.querySelector(t);o&&o.classList.add("enx-multistep:active")}setStep(e){this.currentStep=this.multistepTabs.indexOf(e)}pushState(e){let t={page:e},r="#"+e;history.pushState(t,"",r)}log(e,t){console.log("%cSPA","color: #241C15; background-color: #FF3EBF; padding: 4px; font-weight: 400;"),console.log("Client:	",e),console.log("Action:	",t)}};var H=class{constructor(){this.init(),this.legacyFunctionality()}init(){f("show").forEach(t=>{let r=E(t,"show","field"),o=E(t,"show","value"),i=document.getElementsByName(r);i.length===0&&t.classList.add("enx-hidden"),i.forEach(s=>{s.type==="radio"||s.type==="checkbox"?s.value===o&&s.checked?t.classList.remove("enx-hidden"):t.classList.add("enx-hidden"):s.value===o?t.classList.remove("enx-hidden"):t.classList.add("enx-hidden")})}),document.querySelector(".en__component--page")?.addEventListener("input",t=>{let r=t.target;r.matches("input, select, textarea")&&this.checkShowHide(r.name,r.value)})}checkShowHide(e,t){if(!e||!t)return;e==="transaction.donationAmt.other"&&(e="transaction.donationAmt"),f("show").forEach(o=>{let i=E(o,"show","field"),s=E(o,"show","value");i===e&&(s===t?(w(`showing element with class enx-show[field=${i}][value=${s}]`),o.classList.remove("enx-hidden")):(w(`hiding element with class enx-show[field=${i}][value=${s}]`),o.classList.add("enx-hidden")))})}legacyFunctionality(){this.triggerPaymentType(),this.triggerTaxDeductible(),this.triggerRecurringPayment()}showElements(e){document.querySelectorAll(e).forEach(t=>{t.classList.remove("enx-hidden")})}hideElements(e){document.querySelectorAll(e).forEach(t=>{t.classList.add("enx-hidden")})}showRecurringPayment(){if(this.hideElements('[class*="show:recurring--"]'),window.hasOwnProperty("isRegularDonorFlag")&&typeof window.isRegularDonorFlag<"u"){this.showElements(".show\\:recurring--monthly");return}let e=P("transaction.recurrpay");if(e==="Y"){this.showElements(".show\\:recurring--monthly");return}else e==="N"&&this.showElements(".show\\:recurring--single");this.showElements(".show\\:recurring--monthly-false")}triggerRecurringPayment(){this.showRecurringPayment(),document.querySelectorAll('input[type=radio][name="transaction.recurrpay"]').forEach(t=>{t.addEventListener("change",()=>{this.showRecurringPayment()})})}showTaxDeductible(){this.hideElements("[class*='show:giftaid--']");let e=P("transaction.taxdeductible");e==="Y"?this.showElements(".show\\:giftaid--Y"):e==="N"&&this.showElements(".show\\:giftaid--N")}triggerTaxDeductible(){document.querySelectorAll("input[name='transaction.taxdeductible']").forEach(e=>{e.addEventListener("change",()=>{this.showTaxDeductible()})}),setTimeout(()=>{this.showTaxDeductible()},500)}showPaymentType(){switch(this.hideElements("[class*='show:payment--']"),P("transaction.paymenttype")){case"card":this.showElements(".show\\:payment--card");break;case"paypal":this.showElements(".show\\:payment--paypal");break;case"bacs_debit":case"cash":this.showElements(".show\\:payment--directdebit");break;default:return}}triggerPaymentType(){document.querySelectorAll(".en__field--paymenttype").forEach(t=>{["DOMNodeInserted","change"].forEach(r=>{t.addEventListener(r,()=>{let o=()=>{setTimeout(()=>{this.showPaymentType()},500)};o(),document.querySelectorAll('input[type=radio][name="transaction.paymenttype"]').forEach(function(s){s.addEventListener("change",o)})})})}),document.querySelectorAll('input[type=radio][name="transaction.paymenttype"]').forEach(t=>{t.addEventListener("change",()=>{this.showPaymentType()})}),setTimeout(()=>{this.showPaymentType()},500)}};var U=class{constructor(){this.svgUrl="https://storage.c6-digital.net/en-components/img/share-icons/",this.shareLabels={en:"Share on",fr:"Partager sur",de:"Teilen auf",es:"Compartir en",it:"Condividi su"},this.customShareSettings={facebook:{url:"https://www.facebook.com/sharer/sharer.php?u=",msgSelector:".social-share-fb",btnSelector:".custom-share-settings.facebook-button"},twitter:{url:"https://twitter.com/intent/tweet?text=",msgSelector:".social-share-tw",btnSelector:".custom-share-settings.twitter-button"},whatsapp:{url:"https://api.whatsapp.com/send?text=",msgSelector:".social-share-wa",btnSelector:".custom-share-settings.whatsapp-button"},email:{subjectUrl:"mailto:?subject=",subjectSelector:".social-share-em-subject",bodyUrl:"&body=",bodySelector:".social-share-em-body",btnSelector:".custom-share-settings.email-button"}},this.makeShareButtons(),this.setupSharePreview(),this.hasNativeShareLink()&&this.addNativeShareElement(),this.updateShareLinks()}makeShareButtons(){let e=document.querySelectorAll(".en__socialShare");e.length>0&&e.forEach(t=>{let r=t.getAttribute("data-enshare");t.removeAttribute("style"),t.classList.add("enx-share-link");let o=this.shareLabels[q()]||this.shareLabels.en;t.innerText=`${o} ${r.charAt(0).toUpperCase()+r.slice(1)}`;let i=document.createElement("img");i.classList.add("enx-share-icon"),i.setAttribute("src",this.svgUrl+r+".svg"),t.appendChild(i)})}setupSharePreview(){document.querySelector(".share-preview-image")?.setAttribute("src",document.querySelector("meta[property='og:image']").getAttribute("content")),document.querySelector(".share-preview-title")?.setAttribute("src",document.querySelector("meta[property='og:title']").getAttribute("content")),document.querySelector(".share-preview-description")?.setAttribute("src",document.querySelector("meta[property='og:description']").getAttribute("content")),document.querySelector(".share-preview-link")?.setAttribute("href",document.querySelector(".en__socialShare--facebook").getAttribute("href"))}hasNativeShareLink(){return!!document.querySelector(".social-share-native-link")}addNativeShareElement(){let e=document.querySelector(".social-share-native-link"),t=document.querySelector(".social-share-native-title"),r=document.querySelector(".social-share-native-description");if("navigator"in window&&"share"in window.navigator){let o=document.createElement("button");o.setAttribute("type","button"),o.setAttribute("aria-label","Share"),o.classList.add("social-share-native-button"),o.textContent="Share",e.appendChild(o),o.addEventListener("click",()=>{let i={url:e.querySelector("p").textContent.trim()};t&&(i.title=t.textContent.trim()),r&&(i.text=r.textContent.trim()),window.navigator.share(i)})}else{let o=document.createElement("button");o.setAttribute("type","button"),o.setAttribute("aria-label","Copy"),o.classList.add("social-share-native-button"),o.textContent="Copy",e.appendChild(o),o.addEventListener("click",()=>{let i=document.createRange();i.selectNode(e.querySelector("p")),window.getSelection().removeAllRanges(),window.getSelection().addRange(i),document.execCommand("copy"),window.getSelection().removeAllRanges(),o.textContent="Copied!",o.setAttribute("disabled","disabled"),setTimeout(()=>{o.textContent="Copy",o.removeAttribute("disabled")},2e3)})}}updateShareLinks(){["facebook","twitter","whatsapp","email"].forEach(e=>{let t=this.customShareSettings[e],r=document.querySelector(t.btnSelector);if(r)if(e==="email"){let o=document.querySelector(t.subjectSelector)?.textContent.trim(),i=document.querySelector(t.bodySelector)?.textContent.trim();r.setAttribute("href",t.subjectUrl+encodeURIComponent(o)+t.bodyUrl+encodeURIComponent(i))}else{let o=document.querySelector(t.msgSelector)?.textContent.trim();r.setAttribute("href",t.url+encodeURIComponent(o))}})}};var j=class{constructor(){this.readMoreSections=f("read-more-mobile"),this.readMoreSections.length>0&&this.addReadMoreSections()}addReadMoreSections(){this.readMoreSections.forEach(e=>{let t=E(e,"read-more-mobile","visible")??2,r=[...e.children].slice(t),o=document.createElement("div");o.className="enx-read-more:content-mobile",r.forEach(i=>{o.appendChild(i)}),e.appendChild(o),o.insertAdjacentHTML("beforebegin",`<a style="text-decoration: none; cursor: pointer;" class="enx-read-more:toggle">
          Read more
          <svg
            class="rm-icon-normal ml-2"
            width="15"
            height="15"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <svg
            class="rm-icon-expanded ml-2"
            width="15"
            height="15"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
        </a>`)}),document.querySelectorAll(".enx-read-more\\:toggle").forEach(e=>{e.addEventListener("click",()=>{e.closest('[class*="enx-read-more-mobile"]').classList.toggle("enx-read-more-mobile:open")})})}};var Y=class{constructor(){this.run()}run(){let e=f("text");e.length>0&&e.forEach(t=>{let r=C(t,"text");r&&r.forEach(o=>{let i=document.querySelector(`.${o.source}`);i&&(t.textContent=i.textContent)})})}};var z=class{constructor(){this.run()}run(){let e=f("html");e.length>0&&e.forEach(t=>{let r=C(t,"html");r&&r.forEach(o=>{let i=document.querySelector(`.${o.source}`);i&&(t.innerHTML=i.innerHTML)})})}};var J=class{constructor(){this.addPhotoOfMP()}addPhotoOfMP(){let e=document.querySelectorAll("img[data-mp-location][data-mp-name]");e.length!==0&&e.forEach(async t=>{t.src=await F(t.dataset.mpName,t.dataset.mpLocation)})}};var Z=class{constructor(){this.currentTweet=0,this.tweetTextarea=document.querySelector(".en__tweet textarea"),this.tweets=[],document.querySelector(".ttt--custom-tweets")&&this.customTweets(),document.querySelector(".ttt--mp-picture")&&this.setMPPhoto(),document.querySelector(".ttt--hide-background-tab")&&this.hideBackgroundTab(),document.querySelector(".ttt--hide-sent-btn")&&this.hideSentBtn(),document.querySelector(".ttt--hide-target-profile")&&this.hideTargetProfile(),document.querySelector(".ttt--redirect-on-tweet")&&this.redirectOnTweet()}redirectOnTweet(){document.querySelector(".en__tweetButton__send > a").addEventListener("click",()=>{setTimeout(()=>{window.location.href=Q()},0)})}hideTargetProfile(){let e=document.querySelector(".en__twitterTarget");e.style.display="none"}hideBackgroundTab(){let e=document.querySelector(".en__tweetBackgroundToggle");e.style.display="none";let t=document.querySelector(".en__tweetBackgroundText");t.style.display="none"}hideSentBtn(){let e=document.querySelector(".en__tweetButton__sent");e.style.display="none"}async setMPPhoto(){let e=JSON.parse(document.querySelector(".en__tweetBackgroundText").textContent),t=document.querySelector(".en__twitterTarget__image");t.src=await F(e.name,e.location)}customTweets(){this.getCustomTweets(),this.addNewTweetBtn()}getCustomTweets(){let e=document.querySelector(".en__twitterTarget__handle").textContent,t=[...document.querySelectorAll(".ttt--custom-tweets .en__component--copyblock, .en__tweet textarea")].map(r=>r.textContent.replace("{twitter_handle}",e).trim());this.tweets=ie(t)}addNewTweetBtn(){document.head.insertAdjacentHTML("beforeend",`<style>
        .en__tweet {
          position: relative;
        }

        .en__tweet textarea {
          padding-top: 35px;
        }

        .new-tweet-btn {
          background-color: transparent;
          border: none;
          padding: 0;
          position: absolute;
          top: 20px;
          right: 20px;
          width: 24px;
          height: 24px;
          color: rgb(55 65 81);
        }

        .spin {
          animation: spin 0.5s ease-in-out;
        }
        
        .en__tweetButton--sent .en__tweetButton__send {
          display: inline-block;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }
      </style>
      `);let e=document.querySelector(".en__tweet"),t='<button class="new-tweet-btn" type="button"><svg class="new-tweet-svg" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path></svg></button>';e.insertAdjacentHTML("beforeend",t);let r=document.querySelector(".en__tweet > .new-tweet-btn"),o=document.querySelector(".en__tweet .new-tweet-svg");r.addEventListener("click",()=>{o.classList.add("spin"),setTimeout(()=>{o.classList.remove("spin")},500),this.currentTweet>=this.tweets.length&&(this.currentTweet=0),this.tweetTextarea.value=this.tweets[this.currentTweet],this.currentTweet++})}};var G=class{constructor(){this.removeEmptyDecimalFromTotalAmountSpans(),this.addCurrencyToDonationOther()}removeEmptyDecimalFromTotalAmountSpans(){let e=document.querySelector('span[data-token="amount-total"]');if(!e)return;let t=()=>{let o=".";window.pageJson&&window.pageJson.locale&&(o=1.1.toLocaleString(q()).substring(1,2)),document.querySelectorAll('span[data-token="amount-total"]').forEach(i=>{i.textContent=i.textContent.replace(o+"00","")})};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0})}addCurrencyToDonationOther(){document.querySelector(".en__field--donationAmt .en__field__item--other")?.classList.add("amount-currency--"+ee())}};var y,b,a,ve=function(n){return n.replace(/[^\d]/g,"")},Oe=function(n){return n.reduce(function(e,t){return e+t},0)},$e=function(n,e){return n.slice(0,e)},le=function(n){var e=n.value;return n.delimiters.forEach(function(t){t.split("").forEach(function(r){e=e.replace(new RegExp(r.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g"),"")})}),e},we=function(n){var e=n.blocks,t=n.delimiter,r=t===void 0?"":t,o=n.delimiters,i=o===void 0?[]:o,s=n.delimiterLazyShow,p=s!==void 0&&s,m="",l=n.value,c="";return e.forEach(function(g,h){if(l.length>0){var u,x=l.slice(0,g),v=l.slice(g);c=i.length>0?(u=i[p?h-1:h])!=null?u:c:r,p?(h>0&&(m+=c),m+=x):(m+=x,x.length===g&&h<e.length-1&&(m+=c)),l=v}}),m},ce=function(n){var e=n.delimiter,t=n.delimiters,r=n.prefix,o=r===void 0?"":r,i=n.input;if(i.CLEAVE_ZEN_cursor_tracker!==void 0)return function(){i.removeEventListener("input",i.CLEAVE_ZEN_cursor_tracker),i.CLEAVE_ZEN_cursor_tracker=void 0};var s=[e===void 0?"":e].concat(t===void 0?[]:t);return i.CLEAVE_ZEN_cursor_tracker=function(p){var m,l=p.target;(p.inputType==="deleteContentBackward"||l.value.length!==l.selectionEnd)&&(l.CLEAVE_ZEN_cleanCursorIndex=function(c){for(var g=c.value,h=c.dirtyCursorIndex,u=c.delimiters,x=h,v=0;v<h;v++)u.includes(g[v])&&x--;return x}({value:l.value,dirtyCursorIndex:(m=l.selectionEnd)!=null?m:0,delimiters:s}),setTimeout(function(){var c;if(le({value:l.value,delimiters:s})!==o){var g=function(h){for(var u=h.value,x=h.delimiters,v=h.cleanCursorIndex,d=0;d<u.length&&(x.includes(u[d])&&v++,d!==v-1);d++);return v}({value:l.value,cleanCursorIndex:(c=l.CLEAVE_ZEN_cleanCursorIndex)!=null?c:0,delimiters:s});l.setSelectionRange(g,g)}},0))},i.addEventListener("input",i.CLEAVE_ZEN_cursor_tracker),function(){i.removeEventListener("input",i.CLEAVE_ZEN_cursor_tracker),i.CLEAVE_ZEN_cursor_tracker=void 0}},te=function(n,e){var t=e.blocks,r=e.delimiter,o=r===void 0?"":r,i=e.delimiters,s=i===void 0?[]:i,p=e.delimiterLazyShow,m=p!==void 0&&p,l=e.prefix,c=l===void 0?"":l,g=e.numericOnly,h=g!==void 0&&g,u=e.uppercase,x=u!==void 0&&u,v=e.lowercase,d=v!==void 0&&v;return o.length>0&&s.push(o),n=function(L){var S=L.value,T=L.prefix,R=L.tailPrefix,_=T.length;return _===0?S:S===T&&S!==""?"":S.slice(0,_)===T||R?S.slice(-_)!==T&&R?"":R?S.slice(0,-_):S.slice(_):""}({value:n=le({value:n,delimiters:s}),prefix:c,tailPrefix:!1}),n=h?ve(n):n,n=x?n.toUpperCase():n,n=d?n.toLowerCase():n,c.length>0&&(n=c+n),we({value:n,blocks:t,delimiter:o,delimiters:s,delimiterLazyShow:m})};var ye=" ";(function(n){n.UATP="uatp",n.AMEX="amex",n.DINERS="diners",n.DISCOVER="discover",n.MASTERCARD="mastercard",n.DANKORT="dankort",n.INSTAPAYMENT="instapayment",n.JCB15="jcb15",n.JCB="jcb",n.MAESTRO="maestro",n.VISA="visa",n.MIR="mir",n.UNIONPAY="unionpay",n.GENERAL="general"})(a||(a={}));var D,ae=((y={})[a.UATP]=[4,5,6],y[a.AMEX]=[4,6,5],y[a.DINERS]=[4,6,4],y[a.DISCOVER]=[4,4,4,4],y[a.MASTERCARD]=[4,4,4,4],y[a.DANKORT]=[4,4,4,4],y[a.INSTAPAYMENT]=[4,4,4,4],y[a.JCB15]=[4,6,5],y[a.JCB]=[4,4,4,4],y[a.MAESTRO]=[4,4,4,4],y[a.VISA]=[4,4,4,4],y[a.MIR]=[4,4,4,4],y[a.UNIONPAY]=[4,4,4,4],y[a.GENERAL]=[4,4,4,4],y),fe=((b={})[a.UATP]=/^(?!1800)1\d{0,14}/,b[a.AMEX]=/^3[47]\d{0,13}/,b[a.DISCOVER]=/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,b[a.DINERS]=/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,b[a.MASTERCARD]=/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,b[a.DANKORT]=/^(5019|4175|4571)\d{0,12}/,b[a.INSTAPAYMENT]=/^63[7-9]\d{0,13}/,b[a.JCB15]=/^(?:2131|1800)\d{0,11}/,b[a.JCB]=/^(?:35\d{0,2})\d{0,12}/,b[a.MAESTRO]=/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,b[a.MIR]=/^220[0-4]\d{0,12}/,b[a.VISA]=/^4\d{0,15}/,b[a.UNIONPAY]=/^(62|81)\d{0,14}/,b),ge=function(n){var e=n.reduce(function(t,r){return t+r},0);return n.concat(19-e)},Ve=function(n){for(var e=n.value,t=n.strictMode,r=0,o=Object.keys(fe);r<o.length;r++){var i=o[r];if(fe[i].test(e)){var s=ae[i];return{type:i,blocks:t!=null&&t?ge(s):s}}}return{type:a.GENERAL,blocks:t!=null&&t?ge(ae.general):ae.general}},be=function(n,e){var t=e??{},r=t.delimiter,o=r===void 0?" ":r,i=t.delimiterLazyShow,s=i!==void 0&&i,p=t.strictMode,m=p!==void 0&&p;n=ve(n),n=le({value:n,delimiters:[o]});var l=Ve({value:n,strictMode:m}).blocks,c=Oe(l);return n=$e(n,c),we({value:n,blocks:l,delimiter:o,delimiterLazyShow:s})};(function(n){n.THOUSAND="thousand",n.LAKH="lakh",n.WAN="wan",n.NONE="none"})(D||(D={}));var He=D.THOUSAND,xe=function(n,e){var t=e??{},r=t.delimiter,o=t.numeralThousandsGroupStyle,i=t.numeralIntegerScale,s=t.numeralDecimalMark,p=t.numeralDecimalScale,m=t.stripLeadingZeroes,l=t.numeralPositiveOnly,c=t.tailPrefix,g=t.signBeforePrefix,h=t.prefix;return function(u){var x,v,d,L=u.delimiter,S=u.numeralDecimalMark,T=u.numeralDecimalScale,R=u.stripLeadingZeroes,_=u.numeralPositiveOnly,ue=u.numeralIntegerScale,Se=u.numeralThousandsGroupStyle,Ee=u.signBeforePrefix,Ae=u.tailPrefix,ne=u.prefix,re="",N=u.value.replace(/[A-Za-z]/g,"").replace(S,"M").replace(/[^\dM-]/g,"").replace(/^-/,"N").replace(/-/g,"").replace("N",_!=null&&_?"":"-").replace("M",S);R&&(N=N.replace(/^(-)?0+(?=\d)/,"$1"));var X=N.slice(0,1)==="-"?"-":"";switch(v=Ee?X+ne:ne+X,d=N,N.includes(S)&&(d=(x=N.split(S))[0],re=S+x[1].slice(0,T)),X==="-"&&(d=d.slice(1)),ue>0&&(d=d.slice(0,ue)),Se){case D.LAKH:d=d.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+L);break;case D.WAN:d=d.replace(/(\d)(?=(\d{4})+$)/g,"$1"+L);break;case D.THOUSAND:d=d.replace(/(\d)(?=(\d{3})+$)/g,"$1"+L)}return Ae?X+d+(T>0?re:"")+ne:v+d+(T>0?re:"")}({value:n,delimiter:r===void 0?",":r,numeralIntegerScale:i===void 0?0:i,numeralDecimalMark:s===void 0?".":s,numeralDecimalScale:p===void 0?2:p,stripLeadingZeroes:m===void 0||m,numeralPositiveOnly:l!==void 0&&l,numeralThousandsGroupStyle:o===void 0?He:o,tailPrefix:c!==void 0&&c,signBeforePrefix:g!==void 0&&g,prefix:h===void 0?"":h})};var W=class{constructor(e){this.config=e,this.shouldRun()&&(this.email(),this.creditCard(),this.cvv(),this.sortCode(this.config.sortCodeField),this.accountNumber(this.config.accountNumberField),this.amountOther(),this.noSpaces(".validate-no-spaces"),this.config.removeErrorsOnInput&&this.removeErrorsOnInput())}shouldRun(){return this.config.enabled}email(e="#en__field_supporter_emailAddress"){this.noSpaces(e)}creditCard(e="#en__field_transaction_ccnumber"){let t=document.querySelector(e);t&&(ce({input:t,delimiter:ye}),t.addEventListener("input",r=>{let o=r.target.value;t.value=be(o),w(`Credit Card: ${o}, formatted to: ${t.value}`)}))}cvv(e="#en__field_transaction_ccvv"){let t=document.querySelector(e);t?.addEventListener("input",r=>{let o=r.target.value;t.value=te(o,{numericOnly:!0,blocks:[4]}),w(`CVV: ${o}, formatted to: ${t.value}`)})}sortCode(e){let t=document.getElementsByName(e)[0];t&&(ce({input:t,delimiter:"-"}),t.addEventListener("input",r=>{let o=r.target.value;t.value=te(o,{delimiter:"-",blocks:[2,2,2],numericOnly:!0}),w(`Sort Code: ${o}, formatted to: ${t.value}`)}))}accountNumber(e){let t=document.getElementsByName(e)[0];t&&t.addEventListener("input",r=>{let o=r.target.value;t.value=te(o,{blocks:[8],numericOnly:!0}),w(`Account Number: ${o}, formatted to: ${t.value}`)})}amountOther(e="transaction.donationAmt.other"){let t=document.getElementsByName(e)[0];t&&t.addEventListener("input",r=>{let o=r.target.value;t.value=xe(o,{numeralThousandsGroupStyle:"none"}),w(`Amount Other: ${o}, formatted to: ${t.value}`)})}noSpaces(e=""){document.querySelectorAll(e).forEach(r=>{r.addEventListener("input",()=>{r.value=r.value.replace(/\s+/g,"")})})}removeErrorsOnInput(){document.querySelectorAll("input, select, textarea").forEach(t=>{t.addEventListener("input",r=>{let o=r.target.closest(".en__field");if(o?.classList.contains("en__field--validationFailed")){o.classList.remove("en__field--validationFailed");let s=o.querySelector(".en__field__error");s&&(s.style.display="none")}})})}};var I=class{constructor(e={}){let t={debug:new URLSearchParams(window.location.search).has("debug"),proxies:[],liveValidation:{enabled:!0,removeErrorsOnInput:!0,sortCodeField:"supporter.bankRoutingNumber",accountNumberField:"supporter.bankAccountNumber"},beforeInit:()=>{},beforeCloakRemoval:()=>{},afterInit:()=>{}};this.config={...t,...e},window.hasOwnProperty("ENXPageConfig")&&(this.config={...this.config,...window.ENXPageConfig}),window.ENXConfig=this.config,this.config.beforeInit(),this.waitForEnDefaults().then(()=>{this.enxHelpers=se,this.enxHelpers.transformEnxClassesToDataAttributes(),this.enxModel=new B,this.enxProxyFields=new O(this.config.proxies),this.enxMultiStepForm=new V,this.enxShow=new H,this.enxShare=new U,this.enxReadMoreMobile=new j,this.enxText=new Y,this.enxHtml=new z,this.enxEmailTarget=new J,this.enxTweetTarget=new Z,this.enxDonate=new G,this.enxLiveValidation=new W(this.config.liveValidation),this.config.beforeCloakRemoval(),this.cloak=new $,this.config.afterInit()})}waitForEnDefaults(){return new Promise(e=>{function t(){window.EngagingNetworks.require._defined.enDefaults!==void 0?e():setTimeout(t,50)}t()})}};window.ENX=I;var Ft=I;})();
