(()=>{var xe=Object.defineProperty;var Se=(n,e)=>{for(var t in e)xe(n,t,{get:e[t],enumerable:!0})};var te={};Se(te,{displayDonationAmt:()=>Ae,getCurrency:()=>J,getCurrencySymbol:()=>Ee,getENFieldValue:()=>_,getENSupporterData:()=>S,getENValidators:()=>ae,getEnPageLocale:()=>k,getMPData:()=>le,getMPPhotoUrl:()=>P,getNextPageUrl:()=>ee,getVisibleValidators:()=>se,giftAidCalculation:()=>Ce,log:()=>C,saveDonationAmtToStorage:()=>be,saveFieldValueToSessionStorage:()=>ce,setENFieldValue:()=>G,shuffleArray:()=>Q,validateVisibleFields:()=>W});function _(n,e=!0){let t=window.EngagingNetworks.require._defined.enDefaults.getFieldValue(n);return t||(e?S(n):null)}function S(n){return window.EngagingNetworks.require._defined.enDefaults.getSupporterData(n)}function G(n,e){window.EngagingNetworks.require._defined.enDefaults.setFieldValue(n,e)}function ae(){return window.EngagingNetworks.require._defined.enValidation.validation.validators}function se(){return ae().filter(n=>!!document.querySelector(".enx-multistep-active .en__field--"+n.field))}function W(){return se().map(e=>(e.hideMessage(),!e.isVisible()||e.test())).every(e=>e)}function Q(n){for(var e=n.length,t,i;e;)i=Math.floor(Math.random()*e--),t=n[e],n[e]=n[i],n[i]=t;return n}function ee(){return document.querySelector("form.en__component--page")?.getAttribute("action")??""}async function le(n,e){try{return await(await fetch(`https://members-api.parliament.uk/api/Members/Search?skip=0&take=1&Name=${n}&Location=${e}`)).json()}catch{return!1}}async function P(n,e){let t=await le(n,e);return t.items[0]?t.items[0].value.thumbnailUrl:(console.log("No MP found for",n,e),"")}function k(){return window.pageJson.locale.substring(0,2)||"en"}function J(){return _("paycurrency")||_("currency")||"USD"}function Ee(){return 1 .toLocaleString(k(),{style:"currency",currency:J()}).replace("1.00","")}function ce(n,e=null){e||(e=n),sessionStorage.setItem(e,_(n))}function be(){ce("donationAmt")}function Ae(){let n=document.querySelector(".display-donation-amt"),e=sessionStorage.getItem("donationAmt");n&&e&&(n.textContent=e)}function Ce(){let n=document.querySelector(".gift-aid-calculation"),e=sessionStorage.getItem("donationAmt");if(n&&e){let t=e/4*5;t%1!==0&&(t=t.toFixed(2)),n.querySelector(".donation-amt").textContent=e,n.querySelector(".gift-aid-amt").textContent=t.toString(),n.style.display="block"}}function C(n){window.ENXConfig.debug&&console.log(`%c[ENX]: ${n}`,"color: #241C15; background-color: #FF3EBF; padding: 4px; font-weight: 400;")}var M=class{constructor(){this.bindTargets=[...document.querySelectorAll("[class*='enx-model:']")],this.shouldRun()&&this.run()}shouldRun(){return this.bindTargets.length>0}run(){let e=this.bindTargets.map(i=>i.classList.value.split("enx-model:")[1].split(" ")[0]);[...new Set(e)].forEach(i=>{[...document.querySelectorAll(`[name="${i}"]`)].forEach(o=>{o.addEventListener("change",()=>{let a=CSS.escape(`enx-model:${i}`),h=[...document.querySelectorAll(`.${a}`)],m=_(i.split(".")[1]);h.forEach(l=>{l.textContent=m})})})})}};var D=class{constructor(e=[]){this.proxies=e,this.shouldRun()&&this.activateProxyFields()}shouldRun(){return this.proxies.length>0}activateProxyFields(){this.proxies.forEach(e=>{let t=e.source.split(".")[1],i=e.target.split(".")[1];document.querySelectorAll(`[name="${e.source}"]`).forEach(r=>{r.addEventListener("change",()=>{G(i,S(t))})}),G(i,S(t))})}};var I=class{constructor(){document.querySelectorAll(".enx-cloak").forEach(e=>{e.classList.remove("enx-cloak")})}};var R=class{constructor(){this.currentStep=0,this.multistepTabs=[],this.shouldRun()&&this.init()}init(){this.resetTabs(),this.onUrlHit(),this.onBackButton(),this.onClick()}shouldRun(){return!!document.querySelector(".enx-multistep")}resetTabs(){this.currentStep=0;let e=[...document.querySelectorAll(".enx-multistep[class*='enx-multistep-name--']")].map(t=>t.className.match(/enx-multistep-name--[a-z]*/gi)[0].replace("enx-multistep-name--",""));this.multistepTabs=[...new Set(e)]}onUrlHit(){let e=new URLSearchParams(location.href);if(document.querySelectorAll(".enx-multistep-force-start").length&&!e.has("override-force-multistep")){this.changeStep(".enx-multistep-force-start"),history.pushState(null,"","#"),this.log("URL","Show Landing page");return}if(window.location.hash){let t=location.hash.replace("#","");document.querySelectorAll(".enx-multistep-name--"+t).length?(this.changeStep(".enx-multistep-name--"+t),this.log("URL",'Show "'+location.hash+'"'),this.setStep(t)):[...document.querySelectorAll(".enx-multistep")].some(r=>r.className.match(/show:/))?window.location=window.location.href.split("#")[0]:this.changeStep(document.querySelector(".enx-multistep"));return}this.changeStep(document.querySelector(".enx-multistep"))}onBackButton(){window.onpopstate=e=>{e.state?(this.changeStep(".enx-multistep-name--"+e.state.page),this.log("Browser",'Show "'+e.state.page+'"'),this.setStep(e.state.page)):[...document.querySelectorAll(".enx-multistep")].some(i=>i.className.match(/show:/))?location.reload():(this.changeStep(".enx-multistep"),this.log("Browser","Show Landing page"),this.setStep(this.multistepTabs[0]))}}onClick(){document.querySelectorAll("[enx-multistep-destination]").forEach(t=>{t.addEventListener("click",i=>{let r=i.target.getAttribute("enx-multistep-destination"),o=this.multistepTabs.indexOf(r),a=!i.target.hasAttribute("no-validate")&&this.currentStep<o;if(!(this.currentStep===o||a&&o>this.currentStep+1)){if(a&&!W()){window.dispatchEvent(new CustomEvent("onEnxMultistepError",{detail:this.multistepTabs[this.currentStep].className}));return}this.changeStep(".enx-multistep-name--"+r),this.log("App",'Show "'+r+'"'),window.dispatchEvent(new CustomEvent("enx-multistep:page-view",{detail:[{destination:r,current:this.multistepTabs[this.currentStep]}]})),this.setStep(r),r&&this.pushState(r)}})})}changeStep(e){this.hideAndShow(this.multistepTabs[this.currentStep],e)}hideAndShow(e,t){let i=document.querySelector(`.enx-multistep-name--${e}`);i&&i.classList.remove("enx-multistep-active"),window.scrollTo({top:0,behavior:"smooth"});let r=t instanceof Element?t:document.querySelector(t);r&&r.classList.add("enx-multistep-active")}setStep(e){this.currentStep=this.multistepTabs.indexOf(e)}pushState(e){let t={page:e},i="#"+e;history.pushState(t,"",i)}log(e,t){console.log("%cSPA","color: #241C15; background-color: #FF3EBF; padding: 4px; font-weight: 400;"),console.log("Client:	",e),console.log("Action:	",t)}moveToFirstFailedSpa(){let e=document.querySelector(".en__field--validationFailed"),t=e&&e.closest(".enx-multistep");if(!t)return;let i=Array.from(t.classList).find(r=>r.includes("enx-multistep-name--"));i&&this.changeStep("."+i)}};var F=class{constructor(){this.init(),this.legacyFunctionality()}init(){document.querySelectorAll('[class*="enx-show:"]').forEach(e=>{let t=this.getConditionalClassFromElement(e),i=this.getMatchDetailsFromClass(t);if(!i)return;let r=document.getElementsByName(i.fieldName);r.length===0&&e.classList.add("enx-hidden"),r.forEach(o=>{o.type==="radio"||o.type==="checkbox"?o.value===i.fieldValue&&o.checked?e.classList.remove("enx-hidden"):e.classList.add("enx-hidden"):o.value===i.fieldValue?e.classList.remove("enx-hidden"):e.classList.add("enx-hidden")})}),document.querySelector(".en__component--page")?.addEventListener("input",e=>{let t=e.target;t.matches("input, select, textarea")&&this.checkShowHide(t.name,t.value)})}checkShowHide(e,t){if(!e||!t)return;e==="transaction.donationAmt.other"&&(e="transaction.donationAmt"),document.querySelectorAll('[class*="enx-show:"]').forEach(r=>{let o=this.getConditionalClassFromElement(r),a=this.getMatchDetailsFromClass(o);!a||a.fieldName!==e||(a.fieldValue===t?r.classList.remove("enx-hidden"):r.classList.add("enx-hidden"))})}getConditionalClassFromElement(e){return e.className.split(" ").find(t=>t.includes("enx-show:"))}getMatchDetailsFromClass(e){let i=/enx-show:([^[]+)\[([^[]+)]/g.exec(e);return i?{fieldName:i[1],fieldValue:i[2]}:null}legacyFunctionality(){this.triggerPaymentType(),this.triggerTaxDeductible(),this.triggerRecurringPayment()}showElements(e){document.querySelectorAll(e).forEach(t=>{t.classList.remove("enx-hidden")})}hideElements(e){document.querySelectorAll(e).forEach(t=>{t.classList.add("enx-hidden")})}showRecurringPayment(){if(this.hideElements('[class*="show:recurring--"]'),window.hasOwnProperty("isRegularDonorFlag")&&typeof window.isRegularDonorFlag<"u"){this.showElements(".show\\:recurring--monthly");return}let e=S("recurrpay");if(e==="Y"){this.showElements(".show\\:recurring--monthly");return}else e==="N"&&this.showElements(".show\\:recurring--single");this.showElements(".show\\:recurring--monthly-false")}triggerRecurringPayment(){this.showRecurringPayment(),document.querySelectorAll('input[type=radio][name="transaction.recurrpay"]').forEach(t=>{t.addEventListener("change",()=>{this.showRecurringPayment()})})}showTaxDeductible(){this.hideElements("[class*='show:giftaid--']");let e=S("taxdeductible");e==="Y"?this.showElements(".show\\:giftaid--Y"):e==="N"&&this.showElements(".show\\:giftaid--N")}triggerTaxDeductible(){document.querySelectorAll("input[name='transaction.taxdeductible']").forEach(e=>{e.addEventListener("change",()=>{this.showTaxDeductible()})}),setTimeout(()=>{this.showTaxDeductible()},500)}showPaymentType(){switch(this.hideElements("[class*='show:payment--']"),S("paymenttype")){case"card":this.showElements(".show\\:payment--card");break;case"paypal":this.showElements(".show\\:payment--paypal");break;case"bacs_debit":case"cash":this.showElements(".show\\:payment--directdebit");break;default:return}}triggerPaymentType(){document.querySelectorAll(".en__field--paymenttype").forEach(t=>{["DOMNodeInserted","change"].forEach(i=>{t.addEventListener(i,()=>{let r=()=>{setTimeout(()=>{this.showPaymentType()},500)};r(),document.querySelectorAll('input[type=radio][name="transaction.paymenttype"]').forEach(function(a){a.addEventListener("change",r)})})})}),document.querySelectorAll('input[type=radio][name="transaction.paymenttype"]').forEach(t=>{t.addEventListener("change",()=>{this.showPaymentType()})}),setTimeout(()=>{this.showPaymentType()},500)}};var B=class{constructor(){this.svgUrl="https://storage.c6-digital.net/en-components/img/share-icons/",this.shareLabels={en:"Share on",fr:"Partager sur",de:"Teilen auf",es:"Compartir en",it:"Condividi su"},this.makeShareButtons(),this.setupSharePreview(),this.hasNativeShareLink()&&this.addNativeShareElement()}makeShareButtons(){let e=document.querySelectorAll(".en__socialShare");e.length>0&&e.forEach(t=>{let i=t.getAttribute("data-enshare");t.removeAttribute("style"),t.classList.add("enx-share-link");let r=this.shareLabels[k()]||this.shareLabels.en;t.innerText=`${r} ${i.charAt(0).toUpperCase()+i.slice(1)}`;let o=document.createElement("img");o.classList.add("enx-share-icon"),o.setAttribute("src",this.svgUrl+i+".svg"),t.appendChild(o)})}setupSharePreview(){document.querySelector(".share-preview-image")?.setAttribute("src",document.querySelector("meta[property='og:image']").getAttribute("content")),document.querySelector(".share-preview-title")?.setAttribute("src",document.querySelector("meta[property='og:title']").getAttribute("content")),document.querySelector(".share-preview-description")?.setAttribute("src",document.querySelector("meta[property='og:description']").getAttribute("content")),document.querySelector(".share-preview-link")?.setAttribute("href",document.querySelector(".en__socialShare--facebook").getAttribute("href"))}hasNativeShareLink(){return!!document.querySelector(".social-share-native-link")}addNativeShareElement(){let e=document.querySelector(".social-share-native-link"),t=document.querySelector(".social-share-native-title"),i=document.querySelector(".social-share-native-description");if("navigator"in window&&"share"in window.navigator){let r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("aria-label","Share"),r.classList.add("social-share-native-button"),r.textContent="Share",e.appendChild(r),r.addEventListener("click",()=>{let o={url:e.querySelector("p").textContent.trim()};t&&(o.title=t.textContent.trim()),i&&(o.text=i.textContent.trim()),window.navigator.share(o)})}else{let r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("aria-label","Copy"),r.classList.add("social-share-native-button"),r.textContent="Copy",e.appendChild(r),r.addEventListener("click",()=>{let o=document.createRange();o.selectNode(e.querySelector("p")),window.getSelection().removeAllRanges(),window.getSelection().addRange(o),document.execCommand("copy"),window.getSelection().removeAllRanges(),r.textContent="Copied!",r.setAttribute("disabled","disabled"),setTimeout(()=>{r.textContent="Copy",r.removeAttribute("disabled")},2e3)})}}};var O=class{constructor(){this.readMoreSections=document.querySelectorAll("[class*='enx-read-more-mobile']"),this.readMoreSections.length>0&&this.addReadMoreSections()}addReadMoreSections(){this.readMoreSections.forEach(e=>{let t=/enx-read-more-mobile\[([0-9])]/gi.exec(e.className);t=t?parseInt(t[1]):2;let i=[...e.children].slice(t),r=document.createElement("div");r.className="enx-read-more-content-mobile",i.forEach(o=>{r.appendChild(o)}),e.appendChild(r),r.insertAdjacentHTML("beforebegin",`<a style="text-decoration: none; cursor: pointer;" class="enx-read-more-toggle-mobile">
          Read more
          <svg
            class="rm-icon-normal ml-2"
            width="15"
            height="15"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <svg
            class="rm-icon-expanded ml-2"
            width="15"
            height="15"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
        </a>`)}),document.querySelectorAll(".enx-read-more-toggle-mobile").forEach(e=>{e.addEventListener("click",()=>{e.closest('[class*="enx-read-more-mobile"]').classList.toggle("enx-read-more-mobile--open")})})}};var V=class{constructor(){this.run()}run(){let e=document.querySelectorAll("[class*='enx-text:']");e.length>0&&e.forEach(t=>{let i=t.classList.value.split("enx-text:")[1].split(" ")[0],r=document.querySelector(`.${i}`);r&&(t.textContent=r.textContent)})}};var $=class{constructor(){this.run()}run(){let e=document.querySelectorAll("[class*='enx-html:']");e.length>0&&e.forEach(t=>{let i=t.classList.value.split("enx-html:")[1].split(" ")[0],r=document.querySelector(`.${i}`);r&&(t.innerHTML=r.innerHTML)})}};var H=class{constructor(){this.addPhotoOfMP(),this.bindContactData()}addPhotoOfMP(){let e=document.querySelectorAll("img[data-mp-location][data-mp-name]");e.length!==0&&e.forEach(async t=>{t.src=P(t.dataset.mpName,t.dataset.mpLocation)})}bindContactData(){let e=document.querySelectorAll("[data-contact-bind]");e.length!==0&&e.forEach(t=>{document.querySelectorAll(t.dataset.contactBind).forEach(i=>{i.textContent=t.textContent})})}};var U=class{constructor(){this.currentTweet=0,this.tweetTextarea=document.querySelector(".en__tweet textarea"),this.tweets=[],document.querySelector(".ttt--custom-tweets")&&this.customTweets(),document.querySelector(".ttt--mp-picture")&&this.setMPPhoto(),document.querySelector(".ttt--hide-background-tab")&&this.hideBackgroundTab(),document.querySelector(".ttt--hide-sent-btn")&&this.hideSentBtn(),document.querySelector(".ttt--hide-target-profile")&&this.hideTargetProfile(),document.querySelector(".ttt--redirect-on-tweet")&&this.redirectOnTweet()}redirectOnTweet(){document.querySelector(".en__tweetButton__send > a").addEventListener("click",()=>{setTimeout(()=>{window.location.href=ee()},0)})}hideTargetProfile(){let e=document.querySelector(".en__twitterTarget");e.style.display="none"}hideBackgroundTab(){let e=document.querySelector(".en__tweetBackgroundToggle");e.style.display="none";let t=document.querySelector(".en__tweetBackgroundText");t.style.display="none"}hideSentBtn(){let e=document.querySelector(".en__tweetButton__sent");e.style.display="none"}setMPPhoto(){let e=JSON.parse(document.querySelector(".en__tweetBackgroundText").textContent),t=document.querySelector(".en__twitterTarget__image");t.src=P(e.name,e.location)}customTweets(){this.getCustomTweets(),this.addNewTweetBtn()}getCustomTweets(){let e=document.querySelector(".en__twitterTarget__handle").textContent,t=[...document.querySelectorAll(".ttt--custom-tweets .en__component--copyblock, .en__tweet textarea")].map(i=>i.textContent.replace("{twitter_handle}",e).trim());this.tweets=Q(t)}addNewTweetBtn(){document.head.insertAdjacentHTML("beforeend",`<style>
        .en__tweet {
          position: relative;
        }

        .en__tweet textarea {
          padding-top: 35px;
        }

        .new-tweet-btn {
          background-color: transparent;
          border: none;
          padding: 0;
          position: absolute;
          top: 20px;
          right: 20px;
          width: 24px;
          height: 24px;
          color: rgb(55 65 81);
        }

        .spin {
          animation: spin 0.5s ease-in-out;
        }

        @keyframes spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }
      </style>
      `);let e=document.querySelector(".en__tweet"),t='<button class="new-tweet-btn" type="button"><svg class="new-tweet-svg" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"></path></svg></button>';e.insertAdjacentHTML("beforeend",t);let i=document.querySelector(".en__tweet > .new-tweet-btn"),r=document.querySelector(".en__tweet .new-tweet-svg");i.addEventListener("click",()=>{r.classList.add("spin"),setTimeout(()=>{r.classList.remove("spin")},500),this.currentTweet>=this.tweets.length&&(this.currentTweet=0),this.tweetTextarea.value=this.tweets[this.currentTweet],this.currentTweet++})}};var z=class{constructor(){this.removeEmptyDecimalFromTotalAmountSpans(),this.addCurrencyToDonationOther()}removeEmptyDecimalFromTotalAmountSpans(){let e=document.querySelector('span[data-token="amount-total"]');if(!e)return;let t=()=>{let r=".";window.pageJson&&window.pageJson.locale&&(r=1.1.toLocaleString(k()).substring(1,2)),document.querySelectorAll('span[data-token="amount-total"]').forEach(o=>{o.textContent=o.textContent.replace(r+"00","")})};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0})}addCurrencyToDonationOther(){document.querySelector(".en__field--donationAmt .en__field__item--other")?.classList.add("amount-currency--"+J())}};var g,w,s,me=function(n){return n.replace(/[^\d]/g,"")},Te=function(n){return n.reduce(function(e,t){return e+t},0)},_e=function(n,e){return n.slice(0,e)},re=function(n){var e=n.value;return n.delimiters.forEach(function(t){t.split("").forEach(function(i){e=e.replace(new RegExp(i.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g"),"")})}),e},he=function(n){var e=n.blocks,t=n.delimiter,i=t===void 0?"":t,r=n.delimiters,o=r===void 0?[]:r,a=n.delimiterLazyShow,h=a!==void 0&&a,m="",l=n.value,d="";return e.forEach(function(v,p){if(l.length>0){var c,y=l.slice(0,v),f=l.slice(v);d=o.length>0?(c=o[h?p-1:p])!=null?c:d:i,h?(p>0&&(m+=d),m+=y):(m+=y,y.length===v&&p<e.length-1&&(m+=d)),l=f}}),m},ie=function(n){var e=n.delimiter,t=n.delimiters,i=n.prefix,r=i===void 0?"":i,o=n.input;if(o.CLEAVE_ZEN_cursor_tracker!==void 0)return function(){o.removeEventListener("input",o.CLEAVE_ZEN_cursor_tracker),o.CLEAVE_ZEN_cursor_tracker=void 0};var a=[e===void 0?"":e].concat(t===void 0?[]:t);return o.CLEAVE_ZEN_cursor_tracker=function(h){var m,l=h.target;(h.inputType==="deleteContentBackward"||l.value.length!==l.selectionEnd)&&(l.CLEAVE_ZEN_cleanCursorIndex=function(d){for(var v=d.value,p=d.dirtyCursorIndex,c=d.delimiters,y=p,f=0;f<p;f++)c.includes(v[f])&&y--;return y}({value:l.value,dirtyCursorIndex:(m=l.selectionEnd)!=null?m:0,delimiters:a}),setTimeout(function(){var d;if(re({value:l.value,delimiters:a})!==r){var v=function(p){for(var c=p.value,y=p.delimiters,f=p.cleanCursorIndex,u=0;u<c.length&&(y.includes(c[u])&&f++,u!==f-1);u++);return f}({value:l.value,cleanCursorIndex:(d=l.CLEAVE_ZEN_cleanCursorIndex)!=null?d:0,delimiters:a});l.setSelectionRange(v,v)}},0))},o.addEventListener("input",o.CLEAVE_ZEN_cursor_tracker),function(){o.removeEventListener("input",o.CLEAVE_ZEN_cursor_tracker),o.CLEAVE_ZEN_cursor_tracker=void 0}},j=function(n,e){var t=e.blocks,i=e.delimiter,r=i===void 0?"":i,o=e.delimiters,a=o===void 0?[]:o,h=e.delimiterLazyShow,m=h!==void 0&&h,l=e.prefix,d=l===void 0?"":l,v=e.numericOnly,p=v!==void 0&&v,c=e.uppercase,y=c!==void 0&&c,f=e.lowercase,u=f!==void 0&&f;return r.length>0&&a.push(r),n=function(A){var x=A.value,E=A.prefix,q=A.tailPrefix,b=E.length;return b===0?x:x===E&&x!==""?"":x.slice(0,b)===E||q?x.slice(-b)!==E&&q?"":q?x.slice(0,-b):x.slice(b):""}({value:n=re({value:n,delimiters:a}),prefix:d,tailPrefix:!1}),n=p?me(n):n,n=y?n.toUpperCase():n,n=u?n.toLowerCase():n,d.length>0&&(n=d+n),he({value:n,blocks:t,delimiter:r,delimiters:a,delimiterLazyShow:m})};var pe=" ";(function(n){n.UATP="uatp",n.AMEX="amex",n.DINERS="diners",n.DISCOVER="discover",n.MASTERCARD="mastercard",n.DANKORT="dankort",n.INSTAPAYMENT="instapayment",n.JCB15="jcb15",n.JCB="jcb",n.MAESTRO="maestro",n.VISA="visa",n.MIR="mir",n.UNIONPAY="unionpay",n.GENERAL="general"})(s||(s={}));var L,ne=((g={})[s.UATP]=[4,5,6],g[s.AMEX]=[4,6,5],g[s.DINERS]=[4,6,4],g[s.DISCOVER]=[4,4,4,4],g[s.MASTERCARD]=[4,4,4,4],g[s.DANKORT]=[4,4,4,4],g[s.INSTAPAYMENT]=[4,4,4,4],g[s.JCB15]=[4,6,5],g[s.JCB]=[4,4,4,4],g[s.MAESTRO]=[4,4,4,4],g[s.VISA]=[4,4,4,4],g[s.MIR]=[4,4,4,4],g[s.UNIONPAY]=[4,4,4,4],g[s.GENERAL]=[4,4,4,4],g),ue=((w={})[s.UATP]=/^(?!1800)1\d{0,14}/,w[s.AMEX]=/^3[47]\d{0,13}/,w[s.DISCOVER]=/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,w[s.DINERS]=/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,w[s.MASTERCARD]=/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,w[s.DANKORT]=/^(5019|4175|4571)\d{0,12}/,w[s.INSTAPAYMENT]=/^63[7-9]\d{0,13}/,w[s.JCB15]=/^(?:2131|1800)\d{0,11}/,w[s.JCB]=/^(?:35\d{0,2})\d{0,12}/,w[s.MAESTRO]=/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,w[s.MIR]=/^220[0-4]\d{0,12}/,w[s.VISA]=/^4\d{0,15}/,w[s.UNIONPAY]=/^(62|81)\d{0,14}/,w),de=function(n){var e=n.reduce(function(t,i){return t+i},0);return n.concat(19-e)},ke=function(n){for(var e=n.value,t=n.strictMode,i=0,r=Object.keys(ue);i<r.length;i++){var o=r[i];if(ue[o].test(e)){var a=ne[o];return{type:o,blocks:t!=null&&t?de(a):a}}}return{type:s.GENERAL,blocks:t!=null&&t?de(ne.general):ne.general}},fe=function(n,e){var t=e??{},i=t.delimiter,r=i===void 0?" ":i,o=t.delimiterLazyShow,a=o!==void 0&&o,h=t.strictMode,m=h!==void 0&&h;n=me(n),n=re({value:n,delimiters:[r]});var l=ke({value:n,strictMode:m}).blocks,d=Te(l);return n=_e(n,d),he({value:n,blocks:l,delimiter:r,delimiterLazyShow:a})};(function(n){n.THOUSAND="thousand",n.LAKH="lakh",n.WAN="wan",n.NONE="none"})(L||(L={}));var Le=L.THOUSAND,ge=function(n,e){var t=e??{},i=t.delimiter,r=t.numeralThousandsGroupStyle,o=t.numeralIntegerScale,a=t.numeralDecimalMark,h=t.numeralDecimalScale,m=t.stripLeadingZeroes,l=t.numeralPositiveOnly,d=t.tailPrefix,v=t.signBeforePrefix,p=t.prefix;return function(c){var y,f,u,A=c.delimiter,x=c.numeralDecimalMark,E=c.numeralDecimalScale,q=c.stripLeadingZeroes,b=c.numeralPositiveOnly,oe=c.numeralIntegerScale,ve=c.numeralThousandsGroupStyle,we=c.signBeforePrefix,ye=c.tailPrefix,X=c.prefix,K="",T=c.value.replace(/[A-Za-z]/g,"").replace(x,"M").replace(/[^\dM-]/g,"").replace(/^-/,"N").replace(/-/g,"").replace("N",b!=null&&b?"":"-").replace("M",x);q&&(T=T.replace(/^(-)?0+(?=\d)/,"$1"));var Z=T.slice(0,1)==="-"?"-":"";switch(f=we?Z+X:X+Z,u=T,T.includes(x)&&(u=(y=T.split(x))[0],K=x+y[1].slice(0,E)),Z==="-"&&(u=u.slice(1)),oe>0&&(u=u.slice(0,oe)),ve){case L.LAKH:u=u.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+A);break;case L.WAN:u=u.replace(/(\d)(?=(\d{4})+$)/g,"$1"+A);break;case L.THOUSAND:u=u.replace(/(\d)(?=(\d{3})+$)/g,"$1"+A)}return ye?Z+u+(E>0?K:"")+X:f+u+(E>0?K:"")}({value:n,delimiter:i===void 0?",":i,numeralIntegerScale:o===void 0?0:o,numeralDecimalMark:a===void 0?".":a,numeralDecimalScale:h===void 0?2:h,stripLeadingZeroes:m===void 0||m,numeralPositiveOnly:l!==void 0&&l,numeralThousandsGroupStyle:r===void 0?Le:r,tailPrefix:d!==void 0&&d,signBeforePrefix:v!==void 0&&v,prefix:p===void 0?"":p})};var Y=class{constructor(e){this.config=e,this.shouldRun()&&(this.email(),this.creditCard(),this.cvv(),this.sortCode(this.config.sortCodeField),this.accountNumber(this.config.accountNumberField),this.amountOther(),this.noSpaces(".validate-no-spaces"),this.config.removeErrorsOnInput&&this.removeErrorsOnInput())}shouldRun(){return this.config.enabled}email(e="#en__field_supporter_emailAddress"){this.noSpaces(e)}creditCard(e="#en__field_transaction_ccnumber"){let t=document.querySelector(e);t&&(ie({input:t,delimiter:pe}),t.addEventListener("input",i=>{let r=i.target.value;t.value=fe(r),C(`Credit Card: ${r}, formatted to: ${t.value}`)}))}cvv(e="#en__field_transaction_ccvv"){let t=document.querySelector(e);t?.addEventListener("input",i=>{let r=i.target.value;t.value=j(r,{numericOnly:!0,blocks:[4]}),C(`CVV: ${r}, formatted to: ${t.value}`)})}sortCode(e){let t=document.getElementsByName(e)[0];t&&(ie({input:t,delimiter:"-"}),t.addEventListener("input",i=>{let r=i.target.value;t.value=j(r,{delimiter:"-",blocks:[2,2,2],numericOnly:!0}),C(`Sort Code: ${r}, formatted to: ${t.value}`)}))}accountNumber(e){let t=document.getElementsByName(e)[0];t&&t.addEventListener("input",i=>{let r=i.target.value;t.value=j(r,{blocks:[8],numericOnly:!0}),C(`Account Number: ${r}, formatted to: ${t.value}`)})}amountOther(e="transaction.donationAmt.other"){let t=document.getElementsByName(e)[0];t&&t.addEventListener("input",i=>{let r=i.target.value;t.value=ge(r,{numeralThousandsGroupStyle:"none"}),C(`Amount Other: ${r}, formatted to: ${t.value}`)})}noSpaces(e=""){document.querySelectorAll(e).forEach(i=>{i.addEventListener("input",()=>{i.value=i.value.replace(/\s+/g,"")})})}removeErrorsOnInput(){document.querySelectorAll("input, select, textarea").forEach(t=>{t.addEventListener("input",i=>{let r=i.target.closest(".en__field");if(r?.classList.contains("en__field--validationFailed")){r.classList.remove("en__field--validationFailed");let a=r.querySelector(".en__field__error");a&&(a.style.display="none")}})})}};var N=class{constructor(e={}){let t={debug:new URLSearchParams(window.location.search).has("debug"),proxies:[],liveValidation:{enabled:!0,removeErrorsOnInput:!0,sortCodeField:"supporter.bankRoutingNumber",accountNumberField:"supporter.bankAccountNumber"},beforeInit:()=>{},beforeCloakRemoval:()=>{},afterInit:()=>{}};this.config={...t,...e},window.hasOwnProperty("ENXPageConfig")&&(this.config={...this.config,...window.ENXPageConfig}),window.ENXConfig=this.config,this.config.beforeInit(),this.waitForEnDefaults().then(()=>{this.enxHelpers=te,this.enxModel=new M,this.enxProxyFields=new D(this.config.proxies),this.enxMultiStepForm=new R,this.enxShow=new F,this.enxShare=new B,this.enxReadMoreMobile=new O,this.enxText=new V,this.enxHtml=new $,this.enxEmailTarget=new H,this.enxTweetTarget=new U,this.enxDonate=new z,this.enxLiveValidation=new Y(this.config.liveValidation),this.config.beforeCloakRemoval(),this.cloak=new I,this.config.afterInit()})}waitForEnDefaults(){return new Promise(e=>{function t(){window.EngagingNetworks.require._defined.enDefaults!==void 0?e():setTimeout(t,50)}t()})}};window.ENX=N;var gt=N;})();
